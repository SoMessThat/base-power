<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.SoMessThat.sys.mapper.DepartmentMapper">
  <resultMap id="BaseResultMap" type="com.SoMessThat.sys.domain.Department">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="code" jdbcType="VARCHAR" property="code" />
    <result column="type" jdbcType="VARCHAR" property="type" />
    <result column="registration_time" jdbcType="TIMESTAMP" property="registrationTime" />
    <result column="position" jdbcType="VARCHAR" property="position" />
    <result column="info" jdbcType="VARCHAR" property="info" />
    <result column="duty" jdbcType="VARCHAR" property="duty" />
    <result column="introduction" jdbcType="VARCHAR" property="introduction" />
    <result column="other" jdbcType="VARCHAR" property="other" />
    <result column="master_name" jdbcType="VARCHAR" property="masterName" />
    <result column="master_tel" jdbcType="VARCHAR" property="masterTel" />
    <result column="area_id" jdbcType="BIGINT" property="areaId" />
    <result column="parent_code" jdbcType="VARCHAR" property="parentCode" />
    <result column="parent_path" jdbcType="VARCHAR" property="parentPath" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="status" jdbcType="VARCHAR" property="status" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, name, code, type, registration_time, position, info, duty, introduction, other, 
    master_name, master_tel, area_id, parent_code, parent_path, create_time, update_time, 
    status
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from sys_department
    where id = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from sys_department
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" keyColumn="id" keyProperty="id" parameterType="com.SoMessThat.sys.domain.Department" useGeneratedKeys="true">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into sys_department (name, code, type, 
      registration_time, position, info, 
      duty, introduction, other, 
      master_name, master_tel, area_id, 
      parent_code, parent_path, create_time, 
      update_time, status)
    values (#{name,jdbcType=VARCHAR}, #{code,jdbcType=VARCHAR}, #{type,jdbcType=VARCHAR}, 
      #{registrationTime,jdbcType=TIMESTAMP}, #{position,jdbcType=VARCHAR}, #{info,jdbcType=VARCHAR}, 
      #{duty,jdbcType=VARCHAR}, #{introduction,jdbcType=VARCHAR}, #{other,jdbcType=VARCHAR}, 
      #{masterName,jdbcType=VARCHAR}, #{masterTel,jdbcType=VARCHAR}, #{areaId,jdbcType=BIGINT}, 
      #{parentCode,jdbcType=VARCHAR}, #{parentPath,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, 
      #{updateTime,jdbcType=TIMESTAMP}, #{status,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" keyColumn="id" keyProperty="id" parameterType="com.SoMessThat.sys.domain.Department" useGeneratedKeys="true">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into sys_department
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="name != null">
        name,
      </if>
      <if test="code != null">
        code,
      </if>
      <if test="type != null">
        type,
      </if>
      <if test="registrationTime != null">
        registration_time,
      </if>
      <if test="position != null">
        position,
      </if>
      <if test="info != null">
        info,
      </if>
      <if test="duty != null">
        duty,
      </if>
      <if test="introduction != null">
        introduction,
      </if>
      <if test="other != null">
        other,
      </if>
      <if test="masterName != null">
        master_name,
      </if>
      <if test="masterTel != null">
        master_tel,
      </if>
      <if test="areaId != null">
        area_id,
      </if>
      <if test="parentCode != null">
        parent_code,
      </if>
      <if test="parentPath != null">
        parent_path,
      </if>
      <if test="createTime != null">
        create_time,
      </if>
      <if test="updateTime != null">
        update_time,
      </if>
      <if test="status != null">
        status,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="code != null">
        #{code,jdbcType=VARCHAR},
      </if>
      <if test="type != null">
        #{type,jdbcType=VARCHAR},
      </if>
      <if test="registrationTime != null">
        #{registrationTime,jdbcType=TIMESTAMP},
      </if>
      <if test="position != null">
        #{position,jdbcType=VARCHAR},
      </if>
      <if test="info != null">
        #{info,jdbcType=VARCHAR},
      </if>
      <if test="duty != null">
        #{duty,jdbcType=VARCHAR},
      </if>
      <if test="introduction != null">
        #{introduction,jdbcType=VARCHAR},
      </if>
      <if test="other != null">
        #{other,jdbcType=VARCHAR},
      </if>
      <if test="masterName != null">
        #{masterName,jdbcType=VARCHAR},
      </if>
      <if test="masterTel != null">
        #{masterTel,jdbcType=VARCHAR},
      </if>
      <if test="areaId != null">
        #{areaId,jdbcType=BIGINT},
      </if>
      <if test="parentCode != null">
        #{parentCode,jdbcType=VARCHAR},
      </if>
      <if test="parentPath != null">
        #{parentPath,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null">
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="status != null">
        #{status,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.SoMessThat.sys.domain.Department">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update sys_department
    <set>
      <if test="name != null">
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="code != null">
        code = #{code,jdbcType=VARCHAR},
      </if>
      <if test="type != null">
        type = #{type,jdbcType=VARCHAR},
      </if>
      <if test="registrationTime != null">
        registration_time = #{registrationTime,jdbcType=TIMESTAMP},
      </if>
      <if test="position != null">
        position = #{position,jdbcType=VARCHAR},
      </if>
      <if test="info != null">
        info = #{info,jdbcType=VARCHAR},
      </if>
      <if test="duty != null">
        duty = #{duty,jdbcType=VARCHAR},
      </if>
      <if test="introduction != null">
        introduction = #{introduction,jdbcType=VARCHAR},
      </if>
      <if test="other != null">
        other = #{other,jdbcType=VARCHAR},
      </if>
      <if test="masterName != null">
        master_name = #{masterName,jdbcType=VARCHAR},
      </if>
      <if test="masterTel != null">
        master_tel = #{masterTel,jdbcType=VARCHAR},
      </if>
      <if test="areaId != null">
        area_id = #{areaId,jdbcType=BIGINT},
      </if>
      <if test="parentCode != null">
        parent_code = #{parentCode,jdbcType=VARCHAR},
      </if>
      <if test="parentPath != null">
        parent_path = #{parentPath,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null">
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="status != null">
        status = #{status,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.SoMessThat.sys.domain.Department">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update sys_department
    set name = #{name,jdbcType=VARCHAR},
      code = #{code,jdbcType=VARCHAR},
      type = #{type,jdbcType=VARCHAR},
      registration_time = #{registrationTime,jdbcType=TIMESTAMP},
      position = #{position,jdbcType=VARCHAR},
      info = #{info,jdbcType=VARCHAR},
      duty = #{duty,jdbcType=VARCHAR},
      introduction = #{introduction,jdbcType=VARCHAR},
      other = #{other,jdbcType=VARCHAR},
      master_name = #{masterName,jdbcType=VARCHAR},
      master_tel = #{masterTel,jdbcType=VARCHAR},
      area_id = #{areaId,jdbcType=BIGINT},
      parent_code = #{parentCode,jdbcType=VARCHAR},
      parent_path = #{parentPath,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      update_time = #{updateTime,jdbcType=TIMESTAMP},
      status = #{status,jdbcType=VARCHAR}
    where id = #{id,jdbcType=BIGINT}
  </update>
  
  <select id="queryDepartment" resultType="com.SoMessThat.sys.vo.DepartmentVo">
    select * from sys_department aa
    <where>
	  <if test="id != null">
		and aa.id = #{id}
      </if>
	  <if test="name != null">
		and aa.name = #{name}
      </if>
	  <if test="code != null">
		and aa.code = #{code}
      </if>
	  <if test="type != null">
		and aa.type = #{type}
      </if>
	  <if test="registrationTime != null">
		and aa.registration_time = #{registrationTime}
      </if>
	  <if test="position != null">
		and aa.position = #{position}
      </if>
	  <if test="info != null">
		and aa.info = #{info}
      </if>
	  <if test="duty != null">
		and aa.duty = #{duty}
      </if>
	  <if test="introduction != null">
		and aa.introduction = #{introduction}
      </if>
	  <if test="other != null">
		and aa.other = #{other}
      </if>
	  <if test="masterName != null">
		and aa.master_name = #{masterName}
      </if>
	  <if test="masterTel != null">
		and aa.master_tel = #{masterTel}
      </if>
	  <if test="areaId != null">
		and aa.area_id = #{areaId}
      </if>
	  <if test="parentCode != null">
		and aa.parent_code = #{parentCode}
      </if>
	  <if test="parentPath != null">
		and aa.parent_path = #{parentPath}
      </if>
	  <if test="createTime != null">
		and aa.create_time = #{createTime}
      </if>
	  <if test="updateTime != null">
		and aa.update_time = #{updateTime}
      </if>
	  <if test="status != null">
		and aa.status = #{status}
      </if>
    </where>
  </select>
  
   <select id="findDepartmentByCode" resultType="com.SoMessThat.sys.vo.DepartmentVo">
   	select * from sys_department where code = #{code}
   </select> 
  
   <select id="getDepartmentTree" resultType="com.SoMessThat.sys.vo.TreeVo">
   	select code,name,parent_code from sys_department where parent_code is NULL AND status &lt;&gt; "DELETED"
   </select>   
   
   <select id="getDepartmentSonTree" resultType="com.SoMessThat.sys.vo.TreeVo">
   	select code,name,parent_code from sys_department where parent_code = #{code} AND status &lt;&gt; "DELETED"
   </select>
     
   <update id="mulDelDepartmentByCode">
     update sys_department
     	set status = 'DELETED'
     where code in ${codes}
   </update> 
</mapper>